# Data on COVID-19 in America's nursing homes from CMS
An R script to help use the Centers for Medicare and Medicaid Services' API to retrieve and analyze their weekly data on COVID 19 in your state's nursing homes

All data here was extracted using the Centers for Medicare and Medicaid Services’ Application Programming Interface for data regarding COVID in nursing homes. The script pulls down the data in the JSON format (JavaScript object notation) using the R programming language. CMS generally publishes new data around 5 p.m. Eastern time on Thursdays, and the newly released data is generally about two weeks behind. The data doesn't require use of an API key, but you will have to change out the endpoint each week, because each Thursday brings a new endpoint. To find the latest endpoint, go to this link: https://data.cms.gov/covid-19/covid-19-nursing-home-data/api-docs.

The script can be altered to pull in data for your state. The example in the text is for Georgia, which has about 360 nursing home facilities. 

The total number of columns, or fields, in the data set as of this writing is 212. A complete listing of all the columns in the data this week is fetched in the very last knitR chunk at the end of the script. If you "knit" the script when you're done, a complete listing of the columns will appear at the end of the HTML or PDF summary as an appendix.

Be aware that while the number of columns in the data generally remains steady from week to week, CMS sometimes removes columns from the dataset; they removed about 50-60 columns in early October 2021. (CMS does this, as far as I can tell, without really telling the users that they are doing it. You only find out once you run the script, ping the CMS API and get back screwed-up results ...) Note that not all facilities report each metric each week.

The script also writes out four .CSV files -- one on deaths data, one on case data, one on the vaccination rates for nursing home residents, and the last one for vaccination rates for health care personnel at the nursing homes. 

The script also creates some plots for most of the metrics. Most metrics included in this summary are presented as both histograms – which are like bar charts – and box-and-whisker plots. Boxplots have the added benefit of showing the mean of a dataset and dots for outliers. Note that in some cases, you may not see as many dots as there are outliers, because some dots may be stacked on top of each other.

This summary was created in R using the knitR package and R Markdown. It also makes extensive use of the tidyverse family of R packages. Thank you to all the brilliant folks who wrote those packages and keep them maintained. 

Please note neither that the R Markdown summary generated by this script nor this README file have been copy edited. I apologize in advance for all typos and style errors.
